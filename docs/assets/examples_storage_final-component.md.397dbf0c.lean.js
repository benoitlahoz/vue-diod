import{S as O,r as d,e as C,w as I,o as _,c as v,a as l,t as y,u as K,n as k,f as h,q as L,V as m,F as U,s as A,g as J,p as z,j as V,_ as Y,v as q,x as G,l as H,k as W,b as X}from"./app.ba1d7daa.js";class B{}class F extends B{}var Q=globalThis&&globalThis.__decorate||function(e,a,t,i){var s,o=arguments.length,n=o<3?a:i===null?i=Object.getOwnPropertyDescriptor(a,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,a,t,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(a,t,n):s(a,t))||n);return o>3&&n&&Object.defineProperty(a,t,n),n},Z=globalThis&&globalThis.__metadata||function(e,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,a)};let S=class{set(e,a){let t=`${this._prefix}:${String(e)}`;localStorage.setItem(t,String(a));let i=!isNaN(+a)&&!isNaN(parseFloat(a));this._content.value[String(e)]=i?+a:a,this._content.value=Object.keys(this._content.value).sort((s,o)=>s.toLowerCase().localeCompare(o.toLowerCase())).reduce((s,o)=>(s[o]=this._content.value[o],s),{})}get(e){if(this._content.value[String(e)])return{key:e,value:this._content.value[String(e)]}}remove(e){let a=`${this._prefix}:${String(e)}`;localStorage.removeItem(a),this._content.value[String(e)]&&delete this._content.value[String(e)]}save(e){if(e){let a={prefix:this._prefix,content:{...this._content.value}};e.save(a)}}get prefix(){return this._prefix}get content(){return this._content}constructor(e){this._prefix="vue-diod",this._content=d({}),this._prefix=e,this._content.value=Object.keys(localStorage).filter(a=>a.startsWith(this._prefix)).reduce((a,t)=>{let i=localStorage[t],s=!isNaN(+i)&&!isNaN(parseFloat(i)),o=s?+localStorage[t]:localStorage[t];return Object.assign(a,{[t.replace(`${this._prefix}:`,"")]:o})},{})}};S=Q([O(),Z("design:paramtypes",[String])],S);class R{}var ee=globalThis&&globalThis.__decorate||function(e,a,t,i){var s,o=arguments.length,n=o<3?a:i===null?i=Object.getOwnPropertyDescriptor(a,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,a,t,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(a,t,n):s(a,t))||n);return o>3&&n&&Object.defineProperty(a,t,n),n};let w=class{save(e){let a=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(e,null,2))}`,t=this._generateFilename();this._downloadContent(a,t)}_downloadContent(e,a){let t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",a),document.body.appendChild(t),t.click(),t.remove()}_generateFilename(){let e=new Date;return`${e.getFullYear()}${this._formatDateItem(e.getMonth()+1)}${this._formatDateItem(e.getDate())}-${this._formatDateItem(e.getHours())}.${this._formatDateItem(e.getMinutes())}.${this._formatDateItem(e.getSeconds())}.${e.getMilliseconds()}.json`}_formatDateItem(e){return("0"+e).slice(-2)}};w=ee([O()],w);let $=e=>(z("data-v-5a38256c"),e=e(),V(),e),te={class:"container"},ae=$(()=>l("span",{style:{"font-weight":"bold"}},"Prefix: ",-1)),le={class:"form"},oe=["onKeyup"],se=["onKeyup"],ne={style:{"align-self":"center",width:"100%","border-top":"1px solid var(--vp-c-divider)","margin-top":"24px"}},ie=$(()=>l("thead",null,[l("th",null,"Key"),l("th",null,"Value")],-1)),re={style:{"font-weight":"600"}},ue={style:{display:"flex","align-items":"center",width:"100%","flex-wrap":"wrap"}},ce={style:{"margin-right":"1rem"}},de={style:{"margin-left":"auto"}},_e={style:{display:"flex","align-items":"center","flex-grow":"1",width:"100%","flex-wrap":"wrap"}},pe={style:{"margin-right":"1rem"}},ve={style:{"margin-left":"auto"}},he={key:1,style:{width:"100%"}},fe=$(()=>l("td",{colspan:"2",style:{"text-align":"center"}}," Nothing stored yet ",-1)),ge=[fe],me=C({__name:"storage-service.component",setup(e){let{injectServiceInstance:a}=J(),t=a(F),i=a(R),s=d(null),o=d(""),n=()=>{if(s.value){let u=s.value;o.value=u.value.replace(/[^a-z0-9]/gi,"").trim()}},r=d(null),c=d(""),D=()=>{if(r.value){let u=r.value;c.value=u.value.replace(/[^a-z 0-9]/gi,"").replace(/ +(?= )/g,""),u.value=c.value}},f=d(!0);I([o,c],()=>{f.value=o.value.length===0||c.value.length===0});let b=d([]);I(()=>t,()=>{t&&(b.value=Object.entries(t.content.value))},{immediate:!0,deep:!0});let x=()=>{f.value||(o.value=o.value.trim(),c.value=c.value.trim(),t==null||t.set(o.value,c.value),T())},N=u=>{let p=t.get(u);alert(`Local storage service returned

${JSON.stringify(p,null,2)}`)},M=u=>{t==null||t.remove(u)},P=()=>{t==null||t.save(i)},T=()=>{if(s.value&&r.value){let u=s.value,p=r.value;o.value="",c.value="",u.value=o.value,p.value=c.value,u.blur(),p.blur()}};return(u,p)=>{var j;return _(),v("div",te,[l("div",null,[ae,l("span",null,y((j=K(t))==null?void 0:j.prefix),1)]),l("div",le,[l("div",null,[l("input",{ref_key:"keyInputRef",ref:s,type:"text",placeholder:"Enter the key",class:"item",onInput:n,onKeyup:k(x,["enter"])},null,40,oe),l("input",{ref_key:"valueInputRef",ref:r,type:"text",placeholder:"Enter the value",class:"item",onInput:D,onKeyup:k(x,["enter"])},null,40,se),h(m,{text:"Store",disabled:o.value.length==0||c.value.length==0,class:"item",style:L({backgroundColor:f.value?"grey":"",borderColor:f.value?"darkgrey":""}),onMouseup:x},null,8,["disabled","style"])])]),l("div",ne,[l("table",null,[ie,l("tbody",null,[b.value.length>0?(_(!0),v(U,{key:0},A(b.value,g=>(_(),v("tr",null,[l("td",re,[l("div",ue,[l("div",ce,y(g[0]),1),l("div",de,[h(m,{text:"Get",theme:"alt",onMouseup:E=>N(g[0])},null,8,["onMouseup"])])])]),l("td",null,[l("div",_e,[l("div",pe,y(g[1]),1),l("div",ve,[h(m,{text:"Remove",theme:"sponsor",onMouseup:E=>M(g[0])},null,8,["onMouseup"])])])])]))),256)):(_(),v("tr",he,ge))])])]),l("div",null,[h(m,{text:"Save to File",onMouseup:P})])])}}});let ye=Y(me,[["__scopeId","data-v-5a38256c"]]),be=C({__name:"storage-provider.component",setup(e){let a=H(),t=new W,i=[{register:F,useFactory:()=>new S("vue-diod-example"),scope:q.Singleton},{register:R,use:w}];return t.bootstrap(a,{injectables:i}),(s,o)=>(_(),G(ye))}}),xe={id:"frontmatter-title",tabindex:"-1"},Se=l("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),we={style:{width:"100%",display:"flex","justify-content":"center",margin:"4rem 0"}},$e=l("div",{class:"tip custom-block"},[l("p",{class:"custom-block-title"},"TIP"),l("p",null,"Open your devtools and see how data is stored with the prefix in localStorage.")],-1),ke=JSON.parse('{"title":"Final Component","description":"","frontmatter":{"title":"Final Component"},"headers":[],"relativePath":"examples/storage/final-component.md"}'),je={name:"examples/storage/final-component.md"},Oe=Object.assign(je,{setup:e=>(a,t)=>(_(),v("div",null,[l("h1",xe,[X(y(a.$frontmatter.title)+" ",1),Se]),l("div",we,[h(be)]),$e]))});export{ke as __pageData,Oe as default};
